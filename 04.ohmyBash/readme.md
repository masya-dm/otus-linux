Прошу строго ногами не пинать, в bash я полный nebash, совсем уж простые вещи в курсе конечно, но всякое regex или сортировка массива это оверми.
Сделал как смог. Что знал, что из лекции, что нагуглил. Защита от повторного запуска сделал через утилиту flock. Как вкрутить его через trap не догнал %.
Подробно прокомментировал скрипт. 
